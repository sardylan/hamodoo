<?xml version="1.0" encoding="UTF-8" ?>

<odoo>
    <data noupdate="0">

        <template id="template_award_public_awards" name="Awards List">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure">
                        <div class="container">
                            <h1 class="mt32">Awards</h1>
                            <t t-if="award_ids" t-call="portal.portal_table">
                                <thead>
                                    <tr class="active">
                                        <th>Name</th>
                                        <th>Callsign</th>
                                        <th>Start</th>
                                        <th>End</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="award_ids" t-as="award_id">
                                        <tr>
                                            <td>
                                                <a t-att-href="'/ham_award/public/award/%d' % award_id.id">
                                                    <strong>
                                                        <t t-esc="award_id.name"/>
                                                    </strong>
                                                </a>
                                            </td>
                                            <td>
                                                <span class="ham-award-callsign" t-esc="award_id.common_callsign"/>
                                            </td>
                                            <td>
                                                <t t-esc="award_id.ts_start"/>
                                            </td>
                                            <td>
                                                <t t-esc="award_id.ts_end"/>
                                            </td>
                                        </tr>
                                    </t>
                                </tbody>
                            </t>
                            <div t-else="">
                                <p>There are no awards.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        <template id="template_award_public_award_qsos" name="Awards List">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure">
                        <div class="container">
                            <t t-if="award_id">
                                <h1 class="mt32">
                                    <t t-esc="award_id.name"/>
                                </h1>
                                <div class="ham-award-summary">
                                    <ul>
                                        <li>Callsign:
                                            <span class="ham-award-callsign" t-esc="award_id.common_callsign"/>
                                        </li>
                                        <li>QSO:
                                            <span t-esc="qso_count"/>
                                        </li>
                                        <li>Countries:
                                            <span t-esc="country_count"/>
                                        </li>
                                    </ul>
                                </div>
                                <div t-if="qso_ids" class="ham-award-qso-table">
                                    <div>
                                        <form class="form-inline md-form mr-auto mb-3 pull-right"
                                              method="GET"
                                              t-att-action="'/ham_award/public/award/%d' % award_id.id">
                                            <input type="text"
                                                   name="search_callsign"
                                                   class="form-control mr-sm-2"
                                                   placeholder="Search"
                                                   aria-label="Search"
                                                   t-att-value="search_callsign"/>
                                            <button class="btn aqua-gradient btn-primary my-0" type="submit">
                                                Search
                                            </button>
                                        </form>
                                    </div>
                                    <t t-call="portal.portal_table">
                                        <thead>
                                            <tr class="active">
                                                <th>Date &amp; Time</th>
                                                <th>Callsign</th>
                                                <th>Country</th>
                                                <th>Mode</th>
                                                <th>Frequency</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="qso_ids" t-as="qso_id">
                                                <tr>
                                                    <td>
                                                        <t t-esc="qso_id.ts_start"/>
                                                    </td>
                                                    <td>
                                                        <a t-att-href="'https://www.qrz.com/db/%s' % qso_id.callsign"
                                                           target="-blank">
                                                            <strong>
                                                                <t t-esc="qso_id.callsign"/>
                                                            </strong>
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <t t-esc="qso_id.country_id.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="qso_id.modulation_id.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="'%.03f MHz (%s)' % (float(qso_id.frequency / 1000000), qso_id.band_id and qso_id.band_id.name or '')"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </t>
                                </div>
                            </t>
                            <t t-else="">
                                <div>
                                    <p>Award not found.</p>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
            </t>
        </template>

    </data>
</odoo>
